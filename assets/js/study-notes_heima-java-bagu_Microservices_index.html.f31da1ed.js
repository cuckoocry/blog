"use strict";(self.webpackChunkblogs2=self.webpackChunkblogs2||[]).push([[3999],{66262:(i,e)=>{e.A=(i,e)=>{const a=i.__vccOpts||i;for(const[i,n]of e)a[i]=n;return a}},37368:(i,e,a)=>{a.r(e),a.d(e,{comp:()=>b,data:()=>f});var n=a(20641);const l=a.p+"assets/img/img.7269eb4b.png",r=a.p+"assets/img/img_1.bd3de1d6.png",o=a.p+"assets/img/img_2.9eddf2d0.png",t=a.p+"assets/img/img_3.08768f63.png",s=a.p+"assets/img/img_4.5928c5c7.png",p=(0,n.Fv)('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>视频来源： <a href="https://www.bilibili.com/video/BV1yT411H7YK/?vd_source=7138dfc78c49f602f8d3ed8cfbf0513d" target="_blank" rel="noopener noreferrer">新版Java面试专题视频教程，java八股文面试全套真题+深度详解（含大厂高频面试真题）</a></p></div><h2 id="总览" tabindex="-1"><a class="header-anchor" href="#总览"><span>总览</span></a></h2><figure><img src="'+l+'" alt="img.png" tabindex="0" loading="lazy"><figcaption>img.png</figcaption></figure><h2 id="springcloud" tabindex="-1"><a class="header-anchor" href="#springcloud"><span>SpringCloud</span></a></h2><h3 id="_1、spring-cloud-5-大组件有哪些-【基础、重要】" tabindex="-1"><a class="header-anchor" href="#_1、spring-cloud-5-大组件有哪些-【基础、重要】"><span>1、<strong>Spring Cloud 5 大组件有哪些？</strong>【基础、重要】</span></a></h3><p>通常情况下：</p><ul><li>Eureka : 注册中心</li><li>Ribbon : 负载均衡</li><li>Feign : 远程调用</li><li>Hystrix : 服务熔断</li><li>Zuul/Gateway : 网关</li></ul><p>随着 SpringCloudAlibba 在国内兴起 , 我们项目中使用了一些阿里巴巴的组 件</p><ul><li>注册中心 / 配置中心 Nacos</li><li>负载均衡 Ribbon</li><li>服务调用 Feign</li><li>服务保护 sentinel</li><li>服务网关 Gateway</li></ul><h3 id="_2、服务注册和发现是什么意思-spring-cloud-如何实现服务注册发现" tabindex="-1"><a class="header-anchor" href="#_2、服务注册和发现是什么意思-spring-cloud-如何实现服务注册发现"><span>2、服务注册和发现是什么意思？ Spring Cloud 如何实现服务注册发现</span></a></h3><h4 id="eureka-的作用" tabindex="-1"><a class="header-anchor" href="#eureka-的作用"><span>Eureka 的作用</span></a></h4><figure><img src="'+r+'" alt="img_1.png" tabindex="0" loading="lazy"><figcaption>img_1.png</figcaption></figure><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结：</span></a></h4><ul><li>我们当时项目采用的 eureka 作为注册中心，这个也是 spring cloud 体系中的一个核心组件。</li><li><strong>服务注册</strong>：服务提供者需要把自己的信息注册到 eureka ，由 eureka 来保存这些信息，比如服务名称、 ip 、端口 等等。</li><li><strong>服务发现</strong>：消费者向 eureka 拉取服务列表信息，如果服务提供者有集群，则消费者会利用负载均衡算法，选择一 个发起调用。</li><li><strong>服务监控</strong>：服务提供者会每隔 30 秒向 eureka 发送心跳，报告健康状态，如果 eureka 服务 90 秒没接收到心跳， 从 eureka 中剔除。</li></ul><h4 id="与-nacos-的区别" tabindex="-1"><a class="header-anchor" href="#与-nacos-的区别"><span>与 Nacos 的区别</span></a></h4><figure><img src="'+o+'" alt="img_2.png" tabindex="0" loading="lazy"><figcaption>img_2.png</figcaption></figure><ul><li><p>Nacos 与 eureka 的共同点（注册中心） ① 都支持服务注册和服务拉取 ② 都支持服务提供者心跳方式做健康检测</p></li><li><p>Nacos 与 Eureka 的区别（注册中心） ① Nacos 支持服务端主动检测提供者状态：临时实例采用心跳模式，非临时实例采用主动检测模式 ② 临时实例心跳不正常会被剔除，非临时实例则不会被剔除 ③ Nacos 支持服务列表变更的消息推送模式，服务列表更新更及时 ④ Nacos 集群默认采用 AP 方式，当集群中存在非临时实例时，采用 CP 模式； Eureka 采用 AP 方式</p></li><li><p>Nacos 还支持了配置中心， eureka 则只有注册中心，也是选择使用 nacos 的一个重要原因</p></li></ul><h3 id="_3、你们项目负载均衡如何实现的" tabindex="-1"><a class="header-anchor" href="#_3、你们项目负载均衡如何实现的"><span>3、你们项目负载均衡如何实现的 ?</span></a></h3><ul><li>负载均衡 Ribbon ，发起远程调用 feign 就会使用 Ribbon</li><li>Ribbon 负载均衡策略有哪些 ?</li><li>如果想自定义负载均衡策略如何实现 ?</li></ul><h4 id="ribbon-负载均衡流程" tabindex="-1"><a class="header-anchor" href="#ribbon-负载均衡流程"><span>Ribbon 负载均衡流程</span></a></h4><figure><img src="'+t+'" alt="img_3.png" tabindex="0" loading="lazy"><figcaption>img_3.png</figcaption></figure><h4 id="ribbon-负载均衡策略有哪些" tabindex="-1"><a class="header-anchor" href="#ribbon-负载均衡策略有哪些"><span>Ribbon 负载均衡策略有哪些 ?</span></a></h4>',22),c=(0,n.Lk)("li",null,"BestAvailableRule ：忽略那些短路的服务器，并选择并发数较低的服务器。",-1),d=(0,n.Lk)("li",null,"RetryRule ：重试机制的选择逻辑。",-1),g=(0,n.Lk)("li",null,"AvailabilityFilteringRule ：可用性敏感策略，先过滤非健康的，再选择连接数较小的实例",-1),u=(0,n.Fv)('<h4 id="如果想自定义负载均衡策略如何实现" tabindex="-1"><a class="header-anchor" href="#如果想自定义负载均衡策略如何实现"><span>如果想自定义负载均衡策略如何实现 ?</span></a></h4><p>可以自己创建类实现 <code>IRule</code> 接口 , 然后再通过配置类或者配置文件配置即可 ，通过定义 <code>IRule</code> 实现可以修改负载均衡规则。 ，有两种方式：</p><figure><img src="'+s+'" alt="img_4.png" tabindex="0" loading="lazy"><figcaption>img_4.png</figcaption></figure><p>总结：</p><ul><li>你们项目负载均衡如何实现的 ?</li></ul><p>微服务的负载均衡主要使用了一个组件 Ribbon ，比如，我们在使用 feign 远程调用的过程中，底层的负载均衡就是使用了 ribbon</p><ul><li><p>Ribbon 负载均衡策略有哪些 ?</p></li><li><p>RoundRobinRule ：简单轮询服务列表来选择服务器</p></li><li><p>WeightedResponseTimeRule ：按照权重来选择服务器，响应时间越长，权重越小</p></li><li><p>RandomRule ：随机选择一个可用的服务器</p></li><li><p>ZoneAvoidanceRule ：区域敏感策略，以区域可用的服务器为基础进行服务器的选择。使用 Zone 对服 务器进行分类，这个 Zone 可以理解为一个机房、一个机架等。而后再对 Zone 内的多个服务做轮询 ( 默提供了两种方式，如下）</p></li><li><p>如果想自定义负载均衡策略如何实现 ?</p></li></ul><ol><li>创建类实现 IRule 接口，可以指定负载均衡策略（全局）</li><li>在客户端的配置文件中，可以配置某一个服务调用的负载均衡策略（局部）</li></ol><h3 id="_4、什么是服务雪崩-怎么解决这个问题" tabindex="-1"><a class="header-anchor" href="#_4、什么是服务雪崩-怎么解决这个问题"><span>4、什么是服务雪崩，怎么解决这个问题？</span></a></h3><h2 id="业务相关" tabindex="-1"><a class="header-anchor" href="#业务相关"><span>业务相关</span></a></h2><h3 id="_1、" tabindex="-1"><a class="header-anchor" href="#_1、"><span>1、</span></a></h3>',11),h={},b=(0,a(66262).A)(h,[["render",function(i,e){const a=(0,n.g2)("font");return(0,n.uX)(),(0,n.CE)("div",null,[p,(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(a,{color:"BrulyWood"},{default:(0,n.k6)((()=>[(0,n.eW)(" RoundRobinRule ：简单轮询服务列表来选择服务器。")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(a,{color:"BrulyWood"},{default:(0,n.k6)((()=>[(0,n.eW)(" WeightedResponseTimeRule ：按照权重来选择服务器，响应时间越长，权重越小。")])),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(a,{color:"BrulyWood"},{default:(0,n.k6)((()=>[(0,n.eW)(" RandomRule ：随机选择一个可用的服务器。")])),_:1})]),c,d,g,(0,n.Lk)("li",null,[(0,n.bF)(a,{color:"BrulyWood"},{default:(0,n.k6)((()=>[(0,n.eW)(" ZoneAvoidanceRule ：以区域可用的服务器为基础进行服务器的选择。使用 Zone 对服务器进行分类，这个 Zone 可以理解为一个机房、一个机架等。而后再对 Zone 内的多个服务做轮询。")])),_:1})])]),u])}]]),f=JSON.parse('{"path":"/study-notes/heima-java-bagu/Microservices/","title":"微服务","lang":"zh-CN","frontmatter":{"title":"微服务","category":"面试","description":"提示 视频来源： 新版Java面试专题视频教程，java八股文面试全套真题+深度详解（含大厂高频面试真题） 总览 img.pngimg.png SpringCloud 1、Spring Cloud 5 大组件有哪些？【基础、重要】 通常情况下： Eureka : 注册中心 Ribbon : 负载均衡 Feign : 远程调用 Hystrix : 服务熔...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/study-notes/heima-java-bagu/Microservices/"}],["meta",{"property":"og:site_name","content":"撄宁的博客"}],["meta",{"property":"og:title","content":"微服务"}],["meta",{"property":"og:description","content":"提示 视频来源： 新版Java面试专题视频教程，java八股文面试全套真题+深度详解（含大厂高频面试真题） 总览 img.pngimg.png SpringCloud 1、Spring Cloud 5 大组件有哪些？【基础、重要】 通常情况下： Eureka : 注册中心 Ribbon : 负载均衡 Feign : 远程调用 Hystrix : 服务熔..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-27T14:43:11.000Z"}],["meta",{"property":"article:author","content":"樱宁"}],["meta",{"property":"article:modified_time","content":"2024-07-27T14:43:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"微服务\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-07-27T14:43:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"樱宁\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"总览","slug":"总览","link":"#总览","children":[]},{"level":2,"title":"SpringCloud","slug":"springcloud","link":"#springcloud","children":[{"level":3,"title":"1、Spring Cloud 5 大组件有哪些？【基础、重要】","slug":"_1、spring-cloud-5-大组件有哪些-【基础、重要】","link":"#_1、spring-cloud-5-大组件有哪些-【基础、重要】","children":[]},{"level":3,"title":"2、服务注册和发现是什么意思？ Spring Cloud 如何实现服务注册发现","slug":"_2、服务注册和发现是什么意思-spring-cloud-如何实现服务注册发现","link":"#_2、服务注册和发现是什么意思-spring-cloud-如何实现服务注册发现","children":[]},{"level":3,"title":"3、你们项目负载均衡如何实现的 ?","slug":"_3、你们项目负载均衡如何实现的","link":"#_3、你们项目负载均衡如何实现的","children":[]},{"level":3,"title":"4、什么是服务雪崩，怎么解决这个问题？","slug":"_4、什么是服务雪崩-怎么解决这个问题","link":"#_4、什么是服务雪崩-怎么解决这个问题","children":[]}]},{"level":2,"title":"业务相关","slug":"业务相关","link":"#业务相关","children":[{"level":3,"title":"1、","slug":"_1、","link":"#_1、","children":[]}]}],"git":{"createdTime":1722091391000,"updatedTime":1722091391000,"contributors":[{"name":"jiang","email":"948742327@qq.com","commits":1}]},"readingTime":{"minutes":3.93,"words":1180},"filePathRelative":"study-notes/heima-java-bagu/Microservices/README.md","localizedDate":"2024年7月27日","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>视频来源：\\n<a href=\\"https://www.bilibili.com/video/BV1yT411H7YK/?vd_source=7138dfc78c49f602f8d3ed8cfbf0513d\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">新版Java面试专题视频教程，java八股文面试全套真题+深度详解（含大厂高频面试真题）</a></p>\\n</div>\\n<h2>总览</h2>\\n<figure><figcaption>img.png</figcaption></figure>","autoDesc":true}')}}]);