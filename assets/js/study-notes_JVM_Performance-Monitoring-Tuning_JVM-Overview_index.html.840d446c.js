"use strict";(self.webpackChunkblogs2=self.webpackChunkblogs2||[]).push([[4740],{66262:(t,l)=>{l.A=(t,l)=>{const e=t.__vccOpts||t;for(const[t,i]of l)e[t]=i;return e}},60382:(t,l,e)=>{e.r(l),e.d(l,{comp:()=>r,data:()=>a});var i=e(20641);const p=[(0,i.Fv)('<h2 id="_1-1-大厂面试题" tabindex="-1"><a class="header-anchor" href="#_1-1-大厂面试题"><span>1.1. 大厂面试题</span></a></h2><blockquote><p>支付宝：</p><p>支付宝三面：JVM 性能调优都做了什么？</p><p>小米：</p><p>有做过 JVM 内存优化吗？</p><p>从 SQL、JVM、架构、数据库四个方面讲讲优化思路</p><p>蚂蚁金服：</p><p>JVM 的编译优化</p><p>jvm 性能调优都做了什么</p><p>JVM 诊断调优工具用过哪些？</p><p>二面：jvm 怎样调优，堆内存、栈空间设置多少合适</p><p>三面：JVM 相关的分析工具使用过的有哪些？具体的性能调优步骤如何</p><p>阿里：</p><p>如何进行 JVM 调优？有哪些方法？</p><p>如何理解内存泄漏问题？有哪些情况会导致内存泄漏？如何解决？</p><p>字节跳动：</p><p>三面：JVM 如何调优、参数怎么调？</p><p>拼多多：</p><p>从 SQL、JVM、架构、数据库四个方面讲讲优化思路</p><p>京东：</p><p>JVM 诊断调优工具用过哪些？</p><p>每秒几十万并发的秒杀系统为什么会频繁发生 GC？</p><p>日均百万级交易系统如何优化 JVM？</p><p>线上生产系统 OOM 如何监控及定位与解决？</p><p>高并发系统如何基于 G1 垃圾回收器优化性能？</p></blockquote><h2 id="_1-2-背景说明" tabindex="-1"><a class="header-anchor" href="#_1-2-背景说明"><span>1.2. 背景说明</span></a></h2><p><strong>生产环境中的问题</strong></p><ul><li>生产环境发生了内存溢出该如何处理？</li><li>生产环境应该给服务器分配多少内存合适？</li><li>如何对垃圾回收器的性能进行调优？</li><li>生产环境 CPU 负载飙高该如何处理？</li><li>生产环境应该给应用分配多少线程合适？</li><li>不加 log，如何确定请求是否执行了某一行代码？</li><li>不加 log，如何实时查看某个方法的入参与返回值？</li></ul><p><strong>为什么要调优</strong></p><ul><li>防止出现 OOM</li><li>解决 OOM</li><li>减少 Full GC 出现的频率</li></ul><p><strong>不同阶段的考虑</strong></p><ul><li>上线前</li><li>项目运行阶段</li><li>线上出现 OOM</li></ul><h2 id="_1-3-调优概述" tabindex="-1"><a class="header-anchor" href="#_1-3-调优概述"><span>1.3. 调优概述</span></a></h2><p><strong>监控的依据</strong></p><ul><li>运行日志</li><li>异常堆栈</li><li>GC 日志</li><li>线程快照</li><li>堆转储快照</li></ul><p><strong>调优的大方向</strong></p><ul><li>合理地编写代码</li><li>充分并合理的使用硬件资源</li><li>合理地进行 JVM 调优</li></ul><h2 id="_1-4-性能优化的步骤" tabindex="-1"><a class="header-anchor" href="#_1-4-性能优化的步骤"><span>1.4. 性能优化的步骤</span></a></h2><p><strong>第 1 步：性能监控</strong></p><ul><li>GC 频繁</li><li>cpu load 过高</li><li>OOM</li><li>内存泄露</li><li>死锁</li><li>程序响应时间较长</li></ul><p><strong>第 2 步：性能分析</strong></p><ul><li>打印 GC 日志，通过 GCviewer 或者 http://gceasy.io 来分析异常信息</li><li>灵活运用命令行工具、jstack、jmap、jinfo 等</li><li>dump 出堆文件，使用内存分析工具分析文件</li><li>使用阿里 Arthas、jconsole、JVisualVM 来实时查看 JVM 状态</li><li>jstack 查看堆栈信息</li></ul><p><strong>第 3 步：性能调优</strong></p><ul><li>适当增加内存，根据业务背景选择垃圾回收器</li><li>优化代码，控制内存使用</li><li>增加机器，分散节点压力</li><li>合理设置线程池线程数量</li><li>使用中间件提高程序效率，比如缓存、消息队列等</li><li>其他……</li></ul><h2 id="_1-5-性能评价-测试指标" tabindex="-1"><a class="header-anchor" href="#_1-5-性能评价-测试指标"><span>1.5. 性能评价/测试指标</span></a></h2><p><strong>停顿时间（或响应时间）</strong></p><p>提交请求和返回该请求的响应之间使用的时间，一般比较关注平均响应时间。常用操作的响应时间列表：</p><table><thead><tr><th style="text-align:left;">操作</th><th style="text-align:left;">响应时间</th></tr></thead><tbody><tr><td style="text-align:left;">打开一个站点</td><td style="text-align:left;">几秒</td></tr><tr><td style="text-align:left;">数据库查询一条记录（有索引）</td><td style="text-align:left;">十几毫秒</td></tr><tr><td style="text-align:left;">机械磁盘一次寻址定位</td><td style="text-align:left;">4 毫秒</td></tr><tr><td style="text-align:left;">从机械磁盘顺序读取 1M 数据</td><td style="text-align:left;">2 毫秒</td></tr><tr><td style="text-align:left;">从 SSD 磁盘顺序读取 1M 数据</td><td style="text-align:left;">0.3 毫秒</td></tr><tr><td style="text-align:left;">从远程分布式换成 Redis 读取一个数据</td><td style="text-align:left;">0.5 毫秒</td></tr><tr><td style="text-align:left;">从内存读取 1M 数据</td><td style="text-align:left;">十几微妙</td></tr><tr><td style="text-align:left;">Java 程序本地方法调用</td><td style="text-align:left;">几微妙</td></tr><tr><td style="text-align:left;">网络传输 2Kb 数据</td><td style="text-align:left;">1 微妙</td></tr></tbody></table><p>在垃圾回收环节中：</p><ul><li>暂停时间：执行垃圾收集时，程序的工作线程被暂停的时间。</li><li>-XX:MaxGCPauseMillis</li></ul><p><strong>吞吐量</strong></p><ul><li>对单位时间内完成的工作量（请求）的量度</li><li>在 GC 中：运行用户代码的事件占总运行时间的比例（总运行时间：程序的运行时间+内存回收的时间）</li><li>吞吐量为 1-1/(1+n)，其中-XX::GCTimeRatio=n</li></ul><p><strong>并发数</strong></p><ul><li>同一时刻，对服务器有实际交互的请求数</li></ul><p><strong>内存占用</strong></p><ul><li>Java 堆区所占的内存大小</li></ul><p><strong>相互间的关系</strong></p><p>以高速公路通行状况为例</p><ul><li>吞吐量：每天通过高速公路收费站的车辆的数据</li><li>并发数：高速公路上正在行驶的车辆的数目</li><li>响应时间：车速</li></ul><hr>',37)],n={},r=(0,e(66262).A)(n,[["render",function(t,l){return(0,i.uX)(),(0,i.CE)("div",null,p)}]]),a=JSON.parse('{"path":"/study-notes/JVM/Performance-Monitoring-Tuning/JVM-Overview/","title":"JVM概述篇","lang":"zh-CN","frontmatter":{"title":"JVM概述篇","date":"2023-03-18T00:00:00.000Z","description":"1.1. 大厂面试题 支付宝： 支付宝三面：JVM 性能调优都做了什么？ 小米： 有做过 JVM 内存优化吗？ 从 SQL、JVM、架构、数据库四个方面讲讲优化思路 蚂蚁金服： JVM 的编译优化 jvm 性能调优都做了什么 JVM 诊断调优工具用过哪些？ 二面：jvm 怎样调优，堆内存、栈空间设置多少合适 三面：JVM 相关的分析工具使用过的有哪些？...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/vuepress-theme-home/study-notes/JVM/Performance-Monitoring-Tuning/JVM-Overview/"}],["meta",{"property":"og:site_name","content":"撄宁的博客"}],["meta",{"property":"og:title","content":"JVM概述篇"}],["meta",{"property":"og:description","content":"1.1. 大厂面试题 支付宝： 支付宝三面：JVM 性能调优都做了什么？ 小米： 有做过 JVM 内存优化吗？ 从 SQL、JVM、架构、数据库四个方面讲讲优化思路 蚂蚁金服： JVM 的编译优化 jvm 性能调优都做了什么 JVM 诊断调优工具用过哪些？ 二面：jvm 怎样调优，堆内存、栈空间设置多少合适 三面：JVM 相关的分析工具使用过的有哪些？..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-11T14:20:56.000Z"}],["meta",{"property":"article:author","content":"樱宁"}],["meta",{"property":"article:published_time","content":"2023-03-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-11T14:20:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JVM概述篇\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-08-11T14:20:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"樱宁\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"1.1. 大厂面试题","slug":"_1-1-大厂面试题","link":"#_1-1-大厂面试题","children":[]},{"level":2,"title":"1.2. 背景说明","slug":"_1-2-背景说明","link":"#_1-2-背景说明","children":[]},{"level":2,"title":"1.3. 调优概述","slug":"_1-3-调优概述","link":"#_1-3-调优概述","children":[]},{"level":2,"title":"1.4. 性能优化的步骤","slug":"_1-4-性能优化的步骤","link":"#_1-4-性能优化的步骤","children":[]},{"level":2,"title":"1.5. 性能评价/测试指标","slug":"_1-5-性能评价-测试指标","link":"#_1-5-性能评价-测试指标","children":[]}],"git":{"createdTime":1723381883000,"updatedTime":1723386056000,"contributors":[{"name":"jiang","email":"948742327@qq.com","commits":2}]},"readingTime":{"minutes":3.74,"words":1123},"filePathRelative":"study-notes/JVM/Performance-Monitoring-Tuning/JVM-Overview/README.md","localizedDate":"2023年3月18日","excerpt":"<h2>1.1. 大厂面试题</h2>\\n<blockquote>\\n<p>支付宝：</p>\\n<p>支付宝三面：JVM 性能调优都做了什么？</p>\\n<p>小米：</p>\\n<p>有做过 JVM 内存优化吗？</p>\\n<p>从 SQL、JVM、架构、数据库四个方面讲讲优化思路</p>\\n<p>蚂蚁金服：</p>\\n<p>JVM 的编译优化</p>\\n<p>jvm 性能调优都做了什么</p>\\n<p>JVM 诊断调优工具用过哪些？</p>\\n<p>二面：jvm 怎样调优，堆内存、栈空间设置多少合适</p>\\n<p>三面：JVM 相关的分析工具使用过的有哪些？具体的性能调优步骤如何</p>\\n<p>阿里：</p>\\n<p>如何进行 JVM 调优？有哪些方法？</p>\\n<p>如何理解内存泄漏问题？有哪些情况会导致内存泄漏？如何解决？</p>\\n<p>字节跳动：</p>\\n<p>三面：JVM 如何调优、参数怎么调？</p>\\n<p>拼多多：</p>\\n<p>从 SQL、JVM、架构、数据库四个方面讲讲优化思路</p>\\n<p>京东：</p>\\n<p>JVM 诊断调优工具用过哪些？</p>\\n<p>每秒几十万并发的秒杀系统为什么会频繁发生 GC？</p>\\n<p>日均百万级交易系统如何优化 JVM？</p>\\n<p>线上生产系统 OOM 如何监控及定位与解决？</p>\\n<p>高并发系统如何基于 G1 垃圾回收器优化性能？</p>\\n</blockquote>","autoDesc":true}')}}]);